import { Component, EventEmitter, Input, Output } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { finalize } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../../services/reporter.service";
import * as i2 from "../../services/geographic.service";
import * as i3 from "@cima/commons";
import * as i4 from "@angular/material/slide-toggle";
import * as i5 from "@angular/material/form-field";
import * as i6 from "../print-layout/print-layout.component";
import * as i7 from "@angular/material/select";
import * as i8 from "@angular/material/core";
import * as i9 from "@angular/material/button";
import * as i10 from "../warning-pluvio/warning-pluvio.component";
import * as i11 from "../warning-idro/warning-idro.component";
import * as i12 from "../img-uploader/img-uploader.component";
import * as i13 from "@angular/material/checkbox";
import * as i14 from "@angular/forms";
import * as i15 from "@angular/common";
import * as i16 from "@angular/material/input";
export class PrevSituationComponent {
    constructor(reporterService, geoService, snackBar) {
        this.reporterService = reporterService;
        this.geoService = geoService;
        this.snackBar = snackBar;
        this.previousReportChange = new EventEmitter();
        this.sectionEnabled = false;
        this.pluviometriTableEnabled = false;
        this.idrometriTableEnabled = false;
        this.textPrev = '<span>Situtazione pregressa...</span>';
        this.config = { height: '200px', placeholder: 'Situazione pregressa...' };
        this.uploadedImageLayers = [];
        this.warningIdroLayers = [];
        this.warningPluvioLayers = [];
        this.pluvioCum = 1;
        this.selectedFeatures = '';
        this.view = undefined;
        /*RAINMAPS*/
        this.rainMaps = [{
                id: 0,
                timerange: ''
            }];
        this.mapDisabled = new BehaviorSubject(true);
        this.featureSubscription = undefined;
        this.viewSubscription = undefined;
    }
    resetRainMaps() {
        this.rainMaps = [{ id: 0, timerange: '' }];
        this.updateLayers();
    }
    addRainMaps() {
        this.rainMaps = [...this.rainMaps, { id: 0, timeRange: '' }];
    }
    delRainMaps(item) {
        this.rainMaps = this.rainMaps.filter((x) => x != item);
    }
    updateLayers() {
        this.previousReport.layers = [];
        this.rainMaps.forEach(itm => { if (itm.data)
            this.previousReport.layers.push(itm.data); });
        this.warningIdroLayers.forEach(itm => this.previousReport.layers.push(itm));
        this.warningPluvioLayers.forEach(itm => this.previousReport.layers.push(itm));
        this.uploadedImageLayers.forEach(itm => this.previousReport.layers.push(itm));
    }
    uploadedImageChange(event) {
        this.uploadedImageLayers = event;
        this.updateLayers();
    }
    warnIdroChange(event) {
        this.warningIdroLayers = event;
        this.updateLayers();
    }
    warnPluvioChange(event) {
        this.warningPluvioLayers = event;
        this.updateLayers();
    }
    selectMap(cumValue, map) {
        let mapParameter = {
            layer: 'RAINMAP_ITALY',
            from: this.previousReport.fromUTCSecond,
            to: this.previousReport.toUTCSecond,
            description: '',
            cumul: cumValue,
            lon_min: this.view.bbox.getWest(), lon_max: this.view.bbox.getEast(),
            lat_min: this.view.bbox.getSouth(), lat_max: this.view.bbox.getNorth()
        };
        this.mapDisabled.next(true);
        this.reporterService.printMap(mapParameter)
            .pipe(finalize(() => this.mapDisabled.next(false)))
            .subscribe(data => {
            map.data = data;
            this.updateLayers();
        }, error => {
            console.error(error);
            this.snackBar.error('Si è verificato un errore duranta la generazione della mappa.', '', { duration: 2000 });
        });
    }
    selectPluvioCum(value) {
        this.previousReport.raings_cumul = value + (value > 1 ? ' Ore' : 'Ora');
        this.loadStations();
    }
    dateUpdate() {
        if (this.dateFrom)
            this.previousReport.fromUTCSecond = Math.trunc(new Date(this.dateFrom).getTime() / 1000);
        if (this.dateTo)
            this.previousReport.toUTCSecond = Math.trunc(new Date(this.dateTo).getTime() / 1000);
        this.loadStations();
    }
    layoutChange(layout) {
        if (this.previousReport)
            this.previousReport.nImgs = layout.numberOfImages;
    }
    toggleStationAll(stationlist, listitem, event) {
        console.log('toggleall');
        console.log(stationlist);
        console.log(listitem);
        console.log(event.checked);
        stationlist.splice(0, stationlist.length);
        listitem.forEach(itm => {
            itm.selected = event.checked;
        });
        stationlist.push(...listitem.filter(itm => itm.selected));
    }
    toggleStation(stationlist, listitem, item, event) {
        item.selected = event.checked;
        stationlist.splice(0, stationlist.length);
        stationlist.push(...listitem.filter(itm => itm.selected));
    }
    loadStations() {
        this.pluvioStations = [];
        this.hydroStations = [];
        if (this.selectedFeatures.length > 0 || (this.view && this.view.bbox)) {
            this.reporterService.getPluvio(this.selectedFeatures, this.previousReport.toUTCSecond, this.pluvioCum, this.view.bbox).subscribe(data => {
                console.log('stations', data);
                this.pluvioStations = data;
            }, error => {
                console.error(error);
                this.snackBar.error('Errore durante la lettura dei pluviometri', '', { duration: 2000 });
            });
            this.reporterService.getHydro(this.selectedFeatures, this.previousReport.toUTCSecond, this.view.bbox).subscribe(data => {
                this.hydroStations = data;
                console.log('stations hydro ', data);
            }, error => {
                console.error(error);
                this.snackBar.error('Errore durante la lettura degli idrometri', '', { duration: 2000 });
            });
        }
    }
    enableReport() {
        if (this.sectionEnabled) {
            this.previousReport = {
                fromUTCSecond: 0,
                toUTCSecond: 0,
                text: '',
                title: '',
                nImgs: 1,
                raings_title: 'Pluviometri',
                hydros_title: 'Idrometri',
                layers: [],
                raings: [],
                hydros: [],
                raings_cumul: '1 Ora'
            };
            this.updateLayers();
            this.dateUpdate();
            this.featureSubscription = this.geoService.onFeaturesChange().subscribe(data => {
                this.selectedFeatures = data.join(',');
                this.loadStations();
            });
            this.viewSubscription = this.geoService.onViewCange().subscribe(data => {
                this.view = data;
                this.resetRainMaps();
                this.mapDisabled.next(this.view === undefined);
                this.loadStations();
            });
        }
        else {
            if (this.viewSubscription)
                this.viewSubscription.unsubscribe();
            if (this.featureSubscription)
                this.featureSubscription.unsubscribe();
            this.previousReport = undefined;
        }
        this.previousReportChange.emit(this.previousReport);
    }
    ngOnInit() {
        this.enableReport();
        this.reporterService.getAvailableCumul().subscribe(data => {
            this.cumuls = data;
        });
        this.loadStations();
    }
}
PrevSituationComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.11", ngImport: i0, type: PrevSituationComponent, deps: [{ token: i1.ReporterService }, { token: i2.GeographicService }, { token: i3.SnackbarService }], target: i0.ɵɵFactoryTarget.Component });
PrevSituationComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.11", type: PrevSituationComponent, selector: "reporter-prev-situation", inputs: { previousReport: "previousReport" }, outputs: { previousReportChange: "previousReportChange" }, ngImport: i0, template: "<!--abilitazione-->\n<mat-slide-toggle\n  class=\"\"\n  color=primary [(ngModel)]=\"sectionEnabled\"  (change)=\"enableReport()\">\n  Includi Situazione Pregressa\n</mat-slide-toggle>\n\n\n<div class=\"section-wrapper\" [ngClass]=\"!sectionEnabled?'section-disabled':''\">\n  <!--mappa-->\n  <div class=\"col-12 my-2\" >\n    <!--periodo di analisi-->\n    <h2 class=\"border-bottom mb-3 mt-3\">Periodo di Analisi</h2>\n\n    <mat-form-field appearance=\"fill\" class=\"me-2\">\n      <mat-label>da</mat-label>\n        <input matInput type=\"datetime-local\" placeholder=\"data da\" [(ngModel)]= \"dateFrom\" (change)=\"dateUpdate()\">\n    </mat-form-field>\n\n    <mat-form-field appearance=\"fill\" class=\"me-2\">\n      <mat-label>a</mat-label>\n      <input matInput type=\"datetime-local\" placeholder=\"data a\" [(ngModel)]= \"dateTo\" (change)=\"dateUpdate()\">\n    </mat-form-field>\n\n    <!-- <button mat-flat-button color=\"primary\"><span class=\"fas fa-clock me-1\"></span>Now</button> -->\n\n  </div>\n\n  <!--testo situazione pregressa-->\n  <div class=\"col-12 my-2\" *ngIf=\"sectionEnabled\">\n    <cima-text-editor [(text)]=\"previousReport.text\" [config]=\"config\"></cima-text-editor>\n  </div>\n\n  <!--layout stampa-->\n  <div class=\"col-12 my-2\">\n    <reporter-print-layout (selected)=\"layoutChange($event)\"></reporter-print-layout>\n \n  </div>\n\n  <!--layer-->\n  <div class=\"col-12 my-2\">\n    <h2 class=\"border-bottom mb-3 mt-3\">Layers</h2>\n    <div class=\"row\">\n\n      <div class=\"col-12 col-lg-6 col-xl-3 mb-2\">\n        <div class=\"col-wrapper p-3\">\n          <h3>Mappe di Pioggia</h3>\n\n          <div class=\"rainMap\" *ngFor=\"let map of rainMaps, let i = index\">\n\n            <div class=\"item-list-big-bull\">\n              <span>{{i+1}}</span>\n            </div>\n\n            <mat-form-field appearance=\"fill\" class=\"w-100\">\n              <mat-label>Cumulata</mat-label>\n              <mat-select [(value)]=\"map.selection\" (valueChange)=\"selectMap($event, map)\" [disabled]=\"mapDisabled | async\">\n                <mat-option *ngFor=\"let cumulata of cumuls\" [value]=\"cumulata.value\">\n                  {{cumulata.descr}}\n                </mat-option>\n              </mat-select>\n            </mat-form-field>\n\n            <div class=\"del-btn-wrapper ms-2\">\n              <span class=\"del-btn fas fa-trash-alt\" *ngIf=\"i>0\" (click)=\"delRainMaps(map)\"></span>\n            </div>\n\n          </div>\n\n          <button mat-flat-button color=\"primary\" class=\"bg-success\" (click)=\"addRainMaps()\"><span class=\"fas fa-plus me-1\"></span>Aggiungi Mappa</button>\n\n        </div>\n      </div>\n\n      <div class=\"col-12 col-lg-6 col-xl-3 mb-2\">\n        <div class=\"col-wrapper p-3\">\n          <reporter-warning-pluvio  [disabled]=\"!sectionEnabled\" [report]=\"previousReport\" (warningChange)=\"warnPluvioChange($event)\" ></reporter-warning-pluvio>\n        </div>\n      </div>\n\n      <div class=\"col-12 col-lg-6 col-xl-3 mb-2\">\n        <div class=\"col-wrapper p-3\">\n          <reporter-warning-idro   [disabled]=\"!sectionEnabled\" [report]=\"previousReport\" (warningChange)=\"warnIdroChange($event)\"></reporter-warning-idro>\n        </div>\n      </div>\n\n      <div class=\"col-12 col-lg-6 col-xl-3 mb-2\">\n        <div class=\"col-wrapper p-3\">\n          <reporter-img-uploader (uploadedChange)=\"uploadedImageChange($event)\"></reporter-img-uploader>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <!--tabella pluvio -->\n  <div class=\"col-12 my-2\">\n\n    <!--pluviometri-->\n    <h2 class=\"border-bottom mb-3 mt-3\">Pluviometri</h2>\n\n    <div class=\"row\">\n\n      <div class=\"col-12 d-flex justify-content-between align-items-center\">\n        <!--abilitazione-->\n        <mat-slide-toggle\n          class=\"me-2\"\n          color=primary [(ngModel)]=\"pluviometriTableEnabled\">\n          Includi Pluviometri\n        </mat-slide-toggle>\n\n        <mat-form-field appearance=\"fill\" class=\"\">\n          <mat-label>Cumulata</mat-label>\n          <mat-select [(value)]=\"pluvioCum\" (valueChange)=\"selectPluvioCum($event)\">\n            <mat-option *ngFor=\"let cumulata of cumuls\" [value]=\"cumulata.value\">\n              {{cumulata.descr}}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n      </div>\n\n      <!--tabella pluviometri-->\n      <div class=\"col-12 pluviometri-table\" [ngClass]=\"!pluviometriTableEnabled?'section-disabled':''\">\n\n        <table class=\"table table-striped\">\n          <thead>\n          <tr>\n            <th scope=\"col\">\n              <mat-checkbox class=\"example-margin\" (change)=\"toggleStationAll(previousReport.raings,pluvioStations, $event)\"></mat-checkbox>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Stazione</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca stazione\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Comune</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca comune\">\n              </span></th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Provincia</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca provincia\">\n              </span></th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Regione</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca regione\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Valore</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca valore\">\n              </span>\n            </th>\n          </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let pluvio of pluvioStations\">\n              <td scope=\"row\">\n                <mat-checkbox class=\"example-margin\"  [checked]=\"pluvio.selected\" (change)=\"toggleStation(previousReport.raings,pluvioStations,pluvio,$event)\"></mat-checkbox>\n              </td>\n              <td>{{pluvio.stationname}}</td>\n              <td>{{pluvio.munic}}</td>\n              <td>{{pluvio.district}}</td>\n              <td>{{pluvio.region}}</td>\n              <td>{{pluvio.value}} {{pluvio.mu}}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n\n\n    </div>\n\n  </div>\n\n  <!--tabella idro -->\n  <div class=\"col-12 my-2\">\n\n    <!--pluviometri-->\n    <h2 class=\"border-bottom mb-3 mt-3\">Idrometri</h2>\n\n    <div class=\"row\">\n\n      <div class=\"col-12 d-flex justify-content-between align-items-center\">\n        <!--abilitazione-->\n        <mat-slide-toggle\n          class=\"me-2\"\n          color=primary [(ngModel)]=\"idrometriTableEnabled\">\n          Includi Idrometri \n        </mat-slide-toggle>\n\n      </div>\n\n      <!--tabella idrometri-->\n      <div class=\"col-12 pluviometri-table\" [ngClass]=\"!idrometriTableEnabled?'section-disabled':''\">\n\n        <table class=\"table table-striped\">\n          <thead>\n          <tr>\n            <th scope=\"col\">\n              <mat-checkbox class=\"example-margin\" (change)=\"toggleStationAll(previousReport.hydros,hydroStations,$event)\"></mat-checkbox>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Stazione</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca stazione\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Comune</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca comune\">\n              </span></th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Provincia</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca provincia\">\n              </span></th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Regione</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca regione\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Valore</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca valore\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Superamento Soglia</span>\n              <select class=\"table-filter\" type=\"text\">\n                <option value=\"1\">Nussuna selezione</option>\n                <option value=\"1\">Bassa</option>\n                <option value=\"1\">Media</option>\n                <option value=\"1\">Elevata</option>\n                <option value=\"1\">Molto Elevata</option>\n                <option value=\"1\">Massima</option>\n              </select>\n            </th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr *ngFor=\"let hydro of hydroStations\">\n            <th scope=\"row\">\n              <mat-checkbox class=\"example-margin\"  [checked]=\"hydro.selected\" (change)=\"toggleStation(previousReport.hydros,hydroStations,hydro,$event)\"></mat-checkbox>\n            </th>\n            <td>{{hydro.stationname}}</td>\n            <td>{{hydro.munic}}</td>\n            <td>{{hydro.district}}</td>\n            <td>{{hydro.region}}</td>\n            <td>{{hydro.value}} {{hydro.mu}}</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n\n\n\n    </div>\n\n  </div>\n</div>\n\n\n\n\n", styles: [".section-disabled{opacity:.3;pointer-events:none}.col-wrapper{background-color:#f5f5f5;border-radius:4px}.rainMap{display:flex}.item-list-big-bull{min-width:25px;min-height:25px;max-width:25px;max-height:25px;border-radius:50%;background-color:#0266cc;color:#fff;display:flex;justify-content:center;align-items:center;font-size:1.2em;font-weight:600;margin-right:8px;margin-top:14px}.del-btn-wrapper{padding-top:16px;width:25px}.del-btn-wrapper .del-btn{cursor:pointer;color:gray}.del-btn-wrapper .del-btn:hover{color:#2f4f4f}.table-input-wrapper{position:relative}.table-input-wrapper:after{position:absolute;right:5px;top:50%;transform:translateY(-50%);content:\"\\f002\";font-family:\"Font Awesome 5 Free\";font-weight:900;color:gray}.table-filter{border-radius:4px;border:solid 1px lightgray;padding-right:20px;width:100px}:host ::ng-deep .col-wrapper .mat-form-field-infix{width:auto!important}table tbody{display:block;height:200px;overflow:auto}table thead,tbody tr{display:table;width:100%;table-layout:fixed}table thead{width:calc(100% - 1em)}\n"], components: [{ type: i4.MatSlideToggle, selector: "mat-slide-toggle", inputs: ["disabled", "disableRipple", "color", "tabIndex", "name", "id", "labelPosition", "aria-label", "aria-labelledby", "aria-describedby", "required", "checked"], outputs: ["change", "toggleChange"], exportAs: ["matSlideToggle"] }, { type: i5.MatFormField, selector: "mat-form-field", inputs: ["color", "appearance", "hideRequiredMarker", "hintLabel", "floatLabel"], exportAs: ["matFormField"] }, { type: i3.TextEditorComponent, selector: "cima-text-editor", inputs: ["validator", "text", "config"], outputs: ["textChange"] }, { type: i6.PrintLayoutComponent, selector: "reporter-print-layout", outputs: ["selected"] }, { type: i7.MatSelect, selector: "mat-select", inputs: ["disabled", "disableRipple", "tabIndex"], exportAs: ["matSelect"] }, { type: i8.MatOption, selector: "mat-option", exportAs: ["matOption"] }, { type: i9.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { type: i10.WarningPluvioComponent, selector: "reporter-warning-pluvio", inputs: ["disabled", "report"], outputs: ["warningChange"] }, { type: i11.WarningIdroComponent, selector: "reporter-warning-idro", inputs: ["disabled", "report"], outputs: ["warningChange"] }, { type: i12.ImgUploaderComponent, selector: "reporter-img-uploader", outputs: ["uploadedChange"] }, { type: i13.MatCheckbox, selector: "mat-checkbox", inputs: ["disableRipple", "color", "tabIndex", "aria-label", "aria-labelledby", "aria-describedby", "id", "required", "labelPosition", "name", "value", "checked", "disabled", "indeterminate"], outputs: ["change", "indeterminateChange"], exportAs: ["matCheckbox"] }], directives: [{ type: i14.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i14.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i15.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i5.MatLabel, selector: "mat-label" }, { type: i16.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { type: i14.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i15.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i15.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i14.NgSelectOption, selector: "option", inputs: ["ngValue", "value"] }, { type: i14.ɵNgSelectMultipleOption, selector: "option", inputs: ["ngValue", "value"] }], pipes: { "async": i15.AsyncPipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.11", ngImport: i0, type: PrevSituationComponent, decorators: [{
            type: Component,
            args: [{ selector: 'reporter-prev-situation', template: "<!--abilitazione-->\n<mat-slide-toggle\n  class=\"\"\n  color=primary [(ngModel)]=\"sectionEnabled\"  (change)=\"enableReport()\">\n  Includi Situazione Pregressa\n</mat-slide-toggle>\n\n\n<div class=\"section-wrapper\" [ngClass]=\"!sectionEnabled?'section-disabled':''\">\n  <!--mappa-->\n  <div class=\"col-12 my-2\" >\n    <!--periodo di analisi-->\n    <h2 class=\"border-bottom mb-3 mt-3\">Periodo di Analisi</h2>\n\n    <mat-form-field appearance=\"fill\" class=\"me-2\">\n      <mat-label>da</mat-label>\n        <input matInput type=\"datetime-local\" placeholder=\"data da\" [(ngModel)]= \"dateFrom\" (change)=\"dateUpdate()\">\n    </mat-form-field>\n\n    <mat-form-field appearance=\"fill\" class=\"me-2\">\n      <mat-label>a</mat-label>\n      <input matInput type=\"datetime-local\" placeholder=\"data a\" [(ngModel)]= \"dateTo\" (change)=\"dateUpdate()\">\n    </mat-form-field>\n\n    <!-- <button mat-flat-button color=\"primary\"><span class=\"fas fa-clock me-1\"></span>Now</button> -->\n\n  </div>\n\n  <!--testo situazione pregressa-->\n  <div class=\"col-12 my-2\" *ngIf=\"sectionEnabled\">\n    <cima-text-editor [(text)]=\"previousReport.text\" [config]=\"config\"></cima-text-editor>\n  </div>\n\n  <!--layout stampa-->\n  <div class=\"col-12 my-2\">\n    <reporter-print-layout (selected)=\"layoutChange($event)\"></reporter-print-layout>\n \n  </div>\n\n  <!--layer-->\n  <div class=\"col-12 my-2\">\n    <h2 class=\"border-bottom mb-3 mt-3\">Layers</h2>\n    <div class=\"row\">\n\n      <div class=\"col-12 col-lg-6 col-xl-3 mb-2\">\n        <div class=\"col-wrapper p-3\">\n          <h3>Mappe di Pioggia</h3>\n\n          <div class=\"rainMap\" *ngFor=\"let map of rainMaps, let i = index\">\n\n            <div class=\"item-list-big-bull\">\n              <span>{{i+1}}</span>\n            </div>\n\n            <mat-form-field appearance=\"fill\" class=\"w-100\">\n              <mat-label>Cumulata</mat-label>\n              <mat-select [(value)]=\"map.selection\" (valueChange)=\"selectMap($event, map)\" [disabled]=\"mapDisabled | async\">\n                <mat-option *ngFor=\"let cumulata of cumuls\" [value]=\"cumulata.value\">\n                  {{cumulata.descr}}\n                </mat-option>\n              </mat-select>\n            </mat-form-field>\n\n            <div class=\"del-btn-wrapper ms-2\">\n              <span class=\"del-btn fas fa-trash-alt\" *ngIf=\"i>0\" (click)=\"delRainMaps(map)\"></span>\n            </div>\n\n          </div>\n\n          <button mat-flat-button color=\"primary\" class=\"bg-success\" (click)=\"addRainMaps()\"><span class=\"fas fa-plus me-1\"></span>Aggiungi Mappa</button>\n\n        </div>\n      </div>\n\n      <div class=\"col-12 col-lg-6 col-xl-3 mb-2\">\n        <div class=\"col-wrapper p-3\">\n          <reporter-warning-pluvio  [disabled]=\"!sectionEnabled\" [report]=\"previousReport\" (warningChange)=\"warnPluvioChange($event)\" ></reporter-warning-pluvio>\n        </div>\n      </div>\n\n      <div class=\"col-12 col-lg-6 col-xl-3 mb-2\">\n        <div class=\"col-wrapper p-3\">\n          <reporter-warning-idro   [disabled]=\"!sectionEnabled\" [report]=\"previousReport\" (warningChange)=\"warnIdroChange($event)\"></reporter-warning-idro>\n        </div>\n      </div>\n\n      <div class=\"col-12 col-lg-6 col-xl-3 mb-2\">\n        <div class=\"col-wrapper p-3\">\n          <reporter-img-uploader (uploadedChange)=\"uploadedImageChange($event)\"></reporter-img-uploader>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <!--tabella pluvio -->\n  <div class=\"col-12 my-2\">\n\n    <!--pluviometri-->\n    <h2 class=\"border-bottom mb-3 mt-3\">Pluviometri</h2>\n\n    <div class=\"row\">\n\n      <div class=\"col-12 d-flex justify-content-between align-items-center\">\n        <!--abilitazione-->\n        <mat-slide-toggle\n          class=\"me-2\"\n          color=primary [(ngModel)]=\"pluviometriTableEnabled\">\n          Includi Pluviometri\n        </mat-slide-toggle>\n\n        <mat-form-field appearance=\"fill\" class=\"\">\n          <mat-label>Cumulata</mat-label>\n          <mat-select [(value)]=\"pluvioCum\" (valueChange)=\"selectPluvioCum($event)\">\n            <mat-option *ngFor=\"let cumulata of cumuls\" [value]=\"cumulata.value\">\n              {{cumulata.descr}}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n      </div>\n\n      <!--tabella pluviometri-->\n      <div class=\"col-12 pluviometri-table\" [ngClass]=\"!pluviometriTableEnabled?'section-disabled':''\">\n\n        <table class=\"table table-striped\">\n          <thead>\n          <tr>\n            <th scope=\"col\">\n              <mat-checkbox class=\"example-margin\" (change)=\"toggleStationAll(previousReport.raings,pluvioStations, $event)\"></mat-checkbox>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Stazione</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca stazione\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Comune</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca comune\">\n              </span></th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Provincia</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca provincia\">\n              </span></th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Regione</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca regione\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Valore</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca valore\">\n              </span>\n            </th>\n          </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let pluvio of pluvioStations\">\n              <td scope=\"row\">\n                <mat-checkbox class=\"example-margin\"  [checked]=\"pluvio.selected\" (change)=\"toggleStation(previousReport.raings,pluvioStations,pluvio,$event)\"></mat-checkbox>\n              </td>\n              <td>{{pluvio.stationname}}</td>\n              <td>{{pluvio.munic}}</td>\n              <td>{{pluvio.district}}</td>\n              <td>{{pluvio.region}}</td>\n              <td>{{pluvio.value}} {{pluvio.mu}}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n\n\n    </div>\n\n  </div>\n\n  <!--tabella idro -->\n  <div class=\"col-12 my-2\">\n\n    <!--pluviometri-->\n    <h2 class=\"border-bottom mb-3 mt-3\">Idrometri</h2>\n\n    <div class=\"row\">\n\n      <div class=\"col-12 d-flex justify-content-between align-items-center\">\n        <!--abilitazione-->\n        <mat-slide-toggle\n          class=\"me-2\"\n          color=primary [(ngModel)]=\"idrometriTableEnabled\">\n          Includi Idrometri \n        </mat-slide-toggle>\n\n      </div>\n\n      <!--tabella idrometri-->\n      <div class=\"col-12 pluviometri-table\" [ngClass]=\"!idrometriTableEnabled?'section-disabled':''\">\n\n        <table class=\"table table-striped\">\n          <thead>\n          <tr>\n            <th scope=\"col\">\n              <mat-checkbox class=\"example-margin\" (change)=\"toggleStationAll(previousReport.hydros,hydroStations,$event)\"></mat-checkbox>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Stazione</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca stazione\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Comune</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca comune\">\n              </span></th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Provincia</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca provincia\">\n              </span></th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Regione</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca regione\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Valore</span>\n              <span class=\"table-input-wrapper\">\n                <input class=\"table-filter\" type=\"text\" placeholder=\"Cerca valore\">\n              </span>\n            </th>\n            <th scope=\"col\">\n              <span class=\"me-1\">Superamento Soglia</span>\n              <select class=\"table-filter\" type=\"text\">\n                <option value=\"1\">Nussuna selezione</option>\n                <option value=\"1\">Bassa</option>\n                <option value=\"1\">Media</option>\n                <option value=\"1\">Elevata</option>\n                <option value=\"1\">Molto Elevata</option>\n                <option value=\"1\">Massima</option>\n              </select>\n            </th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr *ngFor=\"let hydro of hydroStations\">\n            <th scope=\"row\">\n              <mat-checkbox class=\"example-margin\"  [checked]=\"hydro.selected\" (change)=\"toggleStation(previousReport.hydros,hydroStations,hydro,$event)\"></mat-checkbox>\n            </th>\n            <td>{{hydro.stationname}}</td>\n            <td>{{hydro.munic}}</td>\n            <td>{{hydro.district}}</td>\n            <td>{{hydro.region}}</td>\n            <td>{{hydro.value}} {{hydro.mu}}</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n\n\n\n    </div>\n\n  </div>\n</div>\n\n\n\n\n", styles: [".section-disabled{opacity:.3;pointer-events:none}.col-wrapper{background-color:#f5f5f5;border-radius:4px}.rainMap{display:flex}.item-list-big-bull{min-width:25px;min-height:25px;max-width:25px;max-height:25px;border-radius:50%;background-color:#0266cc;color:#fff;display:flex;justify-content:center;align-items:center;font-size:1.2em;font-weight:600;margin-right:8px;margin-top:14px}.del-btn-wrapper{padding-top:16px;width:25px}.del-btn-wrapper .del-btn{cursor:pointer;color:gray}.del-btn-wrapper .del-btn:hover{color:#2f4f4f}.table-input-wrapper{position:relative}.table-input-wrapper:after{position:absolute;right:5px;top:50%;transform:translateY(-50%);content:\"\\f002\";font-family:\"Font Awesome 5 Free\";font-weight:900;color:gray}.table-filter{border-radius:4px;border:solid 1px lightgray;padding-right:20px;width:100px}:host ::ng-deep .col-wrapper .mat-form-field-infix{width:auto!important}table tbody{display:block;height:200px;overflow:auto}table thead,tbody tr{display:table;width:100%;table-layout:fixed}table thead{width:calc(100% - 1em)}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.ReporterService }, { type: i2.GeographicService }, { type: i3.SnackbarService }]; }, propDecorators: { previousReport: [{
                type: Input
            }], previousReportChange: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJldi1zaXR1YXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY2ltYS9yZXBvcnRlci9zcmMvbGliL2NvbXBvbmVudHMvcHJldi1zaXR1YXRpb24vcHJldi1zaXR1YXRpb24uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY2ltYS9yZXBvcnRlci9zcmMvbGliL2NvbXBvbmVudHMvcHJldi1zaXR1YXRpb24vcHJldi1zaXR1YXRpb24uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUvRSxPQUFPLEVBQUUsZUFBZSxFQUE0QixNQUFNLE1BQU0sQ0FBQztBQUNqRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWExQyxNQUFNLE9BQU8sc0JBQXNCO0lBbUNqQyxZQUFvQixlQUFnQyxFQUMxQyxVQUE2QixFQUFTLFFBQXlCO1FBRHJELG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtRQUMxQyxlQUFVLEdBQVYsVUFBVSxDQUFtQjtRQUFTLGFBQVEsR0FBUixRQUFRLENBQWlCO1FBbEMvRCx5QkFBb0IsR0FBRyxJQUFJLFlBQVksRUFBa0IsQ0FBQztRQUk3RCxtQkFBYyxHQUFDLEtBQUssQ0FBQTtRQUVwQiw0QkFBdUIsR0FBQyxLQUFLLENBQUE7UUFDN0IsMEJBQXFCLEdBQUMsS0FBSyxDQUFBO1FBRTNCLGFBQVEsR0FBVyx1Q0FBdUMsQ0FBQztRQUMzRCxXQUFNLEdBQThCLEVBQUMsTUFBTSxFQUFDLE9BQU8sRUFBRSxXQUFXLEVBQUUseUJBQXlCLEVBQUMsQ0FBQTtRQUk1Rix3QkFBbUIsR0FBUSxFQUFFLENBQUM7UUFDOUIsc0JBQWlCLEdB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Q0YsQ0FBQTtRQUdELElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QixDQUFDOztvSEEvTlUsc0JBQXNCO3dHQUF0QixzQkFBc0Isd0tDakJuQyxvZ1VBa1JBOzRGRGpRYSxzQkFBc0I7a0JBTGxDLFNBQVM7K0JBQ0UseUJBQXlCO29LQUsxQixjQUFjO3NCQUF0QixLQUFLO2dCQUNJLG9CQUFvQjtzQkFBN0IsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGltcG9ydFR5cGUgfSBmcm9tICdAYW5ndWxhci9jb21waWxlci9zcmMvb3V0cHV0L291dHB1dF9hc3QnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtTbmFja2JhclNlcnZpY2UsIFRleHRFZGl0b3JDb21wb25lbnRDb25maWd9IGZyb20gXCJAY2ltYS9jb21tb25zXCI7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmluYWxpemUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBQcmludExheW91dCB9IGZyb20gJy4uLy4uL21vZGVscy9jbGFzc2VzJztcbmltcG9ydCB7TGF5ZXIsIFByZXZpb3VzUmVwb3J0LCBTdGF0aW9uIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2ludGVyZmFjZXMnO1xuaW1wb3J0IHtGYWtlRGF0YVNlcnZpY2V9IGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9mYWtlLWRhdGEuc2VydmljZVwiO1xuaW1wb3J0IHsgR2VvZ3JhcGhpY1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9nZW9ncmFwaGljLnNlcnZpY2UnO1xuaW1wb3J0IHsgUmVwb3J0ZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcmVwb3J0ZXIuc2VydmljZSc7XG5cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncmVwb3J0ZXItcHJldi1zaXR1YXRpb24nLFxuICB0ZW1wbGF0ZVVybDogJy4vcHJldi1zaXR1YXRpb24uY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9wcmV2LXNpdHVhdGlvbi5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIFByZXZTaXR1YXRpb25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBwcmV2aW91c1JlcG9ydDogUHJldmlvdXNSZXBvcnQ7XG4gIEBPdXRwdXQoKSBwcmV2aW91c1JlcG9ydENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8UHJldmlvdXNSZXBvcnQ+KCk7XG5cblxuXG4gIHB1YmxpYyBzZWN0aW9uRW5hYmxlZD1mYWxzZVxuXG4gIHB1YmxpYyBwbHV2aW9tZXRyaVRhYmxlRW5hYmxlZD1mYWxzZVxuICBwdWJsaWMgaWRyb21ldHJpVGFibGVFbmFibGVkPWZhbHNlXG5cbiAgcHVibGljIHRleHRQcmV2OiBzdHJpbmcgPSAnPHNwYW4+U2l0dXRhemlvbmUgcHJlZ3Jlc3NhLi4uPC9zcGFuPic7XG4gIHB1YmxpYyBjb25maWc6IFRleHRFZGl0b3JDb21wb25lbnRDb25maWcgPSB7aGVpZ2h0OicyMDBweCcsIHBsYWNlaG9sZGVyOiAnU2l0dWF6aW9uZSBwcmVncmVzc2EuLi4nfVxuICBwdWJsaWMgZGF0ZUZyb206IGFueTtcbiAgcHVibGljIGRhdGVUbzogYW55O1xuICBwdWJsaWMgY3VtdWxzOiBhbnlbXTtcbiAgcHVibGljIHVwbG9hZGVkSW1hZ2VMYXllcnM6IGFueVtdPVtdO1xuICBwdWJsaWMgd2FybmluZ0lkcm9MYXllcnM6IGFueVtdPVtdO1xuICBwdWJsaWMgd2FybmluZ1BsdXZpb0xheWVyczogYW55W109W107XG4gIHB1YmxpYyBwbHV2aW9DdW06IG51bWJlcj0xO1xuICBwdWJsaWMgaHlkcm9TdGF0aW9uczogYW55W107XG4gIHB1YmxpYyBwbHV2aW9TdGF0aW9uczogYW55W107XG4gIHByaXZhdGUgc2VsZWN0ZWRGZWF0dXJlczogc3RyaW5nPScnO1xuICBwcml2YXRlIHZpZXc6IGFueT11bmRlZmluZWQ7XG5cbiAgLypSQUlOTUFQUyovXG4gIHB1YmxpYyByYWluTWFwczogYW55W10gPSBbIHtcbiAgICBpZDowLFxuICAgIHRpbWVyYW5nZTonJ1xuICB9XVxuXG4gIHB1YmxpYyBtYXBEaXNhYmxlZD1uZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KHRydWUpO1xuICBmZWF0dXJlU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb249dW5kZWZpbmVkO1xuICB2aWV3U3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb249dW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVwb3J0ZXJTZXJ2aWNlOiBSZXBvcnRlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSBnZW9TZXJ2aWNlOiBHZW9ncmFwaGljU2VydmljZSxwcml2YXRlIHNuYWNrQmFyOiBTbmFja2JhclNlcnZpY2UpIHsgfVxuXG5cbiAgcmVzZXRSYWluTWFwcygpe1xuICAgIHRoaXMucmFpbk1hcHM9IFt7aWQ6MCx0aW1lcmFuZ2U6Jyd9XVxuICAgIHRoaXMudXBkYXRlTGF5ZXJzKCk7XG4gIH1cblxuICBhZGRSYWluTWFwcygpe1xuICAgIHRoaXMucmFpbk1hcHMgPSBbLi4udGhpcy5yYWluTWFwcywge2lkOjAsIHRpbWVSYW5nZTonJ31dXG4gIH1cblxuICBkZWxSYWluTWFwcyhpdGVtOmFueSkge1xuICAgIHRoaXMucmFpbk1hcHMgPSB0aGlzLnJhaW5NYXBzLmZpbHRlcigoeDogYW55KSA9PiB4ICE9IGl0ZW0pXG4gIH1cblxuXG4gIHByaXZhdGUgdXBkYXRlTGF5ZXJzKCkge1xuICAgIHRoaXMucHJldmlvdXNSZXBvcnQubGF5ZXJzPVtdO1xuICAgIHRoaXMucmFpbk1hcHMuZm9yRWFjaChpdG0gPT4ge2lmIChpdG0uZGF0YSkgIHRoaXMucHJldmlvdXNSZXBvcnQubGF5ZXJzLnB1c2goaXRtLmRhdGEpfSk7XG4gICAgdGhpcy53YXJuaW5nSWRyb0xheWVycy5mb3JFYWNoKCBpdG0gPT4gdGhpcy5wcmV2aW91c1JlcG9ydC5sYXllcnMucHVzaChpdG0pKTtcbiAgICB0aGlzLndhcm5pbmdQbHV2aW9MYXllcnMuZm9yRWFjaCggaXRtID0+IHRoaXMucHJldmlvdXNSZXBvcnQubGF5ZXJzLnB1c2goaXRtKSk7XG4gICAgdGhpcy51cGxvYWRlZEltYWdlTGF5ZXJzLmZvckVhY2goaXRtID0+IHRoaXMucHJldmlvdXNSZXBvcnQubGF5ZXJzLnB1c2goaXRtKSk7XG4gIH1cblxuICBwdWJsaWMgdXBsb2FkZWRJbWFnZUNoYW5nZShldmVudDogYW55KSB7XG4gICAgdGhpcy51cGxvYWRlZEltYWdlTGF5ZXJzPWV2ZW50O1xuICAgIHRoaXMudXBkYXRlTGF5ZXJzKCk7XG4gIH1cbiAgcHVibGljIHdhcm5JZHJvQ2hhbmdlKGV2ZW50OiBhbnkpIHtcbiAgICB0aGlzLndhcm5pbmdJZHJvTGF5ZXJzPWV2ZW50O1xuICAgIHRoaXMudXBkYXRlTGF5ZXJzKCk7XG4gIH1cblxuICBwdWJsaWMgd2FyblBsdXZpb0NoYW5nZShldmVudDogYW55KSB7XG4gICAgdGhpcy53YXJuaW5nUGx1dmlvTGF5ZXJzPWV2ZW50O1xuICAgIHRoaXMudXBkYXRlTGF5ZXJzKCk7XG4gIH1cblxuXG4gIHB1YmxpYyBzZWxlY3RNYXAoY3VtVmFsdWU6IG51bWJlciwgbWFwOiBhbnkpIHtcbiAgICBsZXQgbWFwUGFyYW1ldGVyPXtcbiAgICAgIGxheWVyOiAnUkFJTk1BUF9JVEFMWScsXG4gICAgICBmcm9tOiB0aGlzLnByZXZpb3VzUmVwb3J0LmZyb21VVENTZWNvbmQsXG4gICAgICB0bzogdGhpcy5wcmV2aW91c1JlcG9ydC50b1VUQ1NlY29uZCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgIGN1bXVsOiBjdW1WYWx1ZSxcbiAgICAgIGxvbl9taW46IHRoaXMudmlldy5iYm94LmdldFdlc3QoKSwgbG9uX21heDogdGhpcy52aWV3LmJib3guZ2V0RWFzdCgpLFxuICAgICAgbGF0X21pbjogdGhpcy52aWV3LmJib3guZ2V0U291dGgoKSwgbGF0X21heDogdGhpcy52aWV3LmJib3guZ2V0Tm9ydGgoKVxuICAgIH1cbiAgICB0aGlzLm1hcERpc2FibGVkLm5leHQodHJ1ZSk7XG4gICAgdGhpcy5yZXBvcnRlclNlcnZpY2UucHJpbnRNYXAobWFwUGFyYW1ldGVyKVxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpbmFsaXplKCgpID0+IHRoaXMubWFwRGlzYWJsZWQubmV4dChmYWxzZSkpKVxuICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgZGF0YSA9PiB7XG4gICAgICAgICAgbWFwLmRhdGE9ZGF0YTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUxheWVycygpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgdGhpcy5zbmFja0Jhci5lcnJvcignU2kgw6ggdmVyaWZpY2F0byB1biBlcnJvcmUgZHVyYW50YSBsYSBnZW5lcmF6aW9uZSBkZWxsYSBtYXBwYS4nLCAnJywge2R1cmF0aW9uOjIwMDB9KTtcbiAgICAgICAgfVxuICAgICAgKTtcblxuICB9XG5cbiAgcHVibGljIHNlbGVjdFBsdXZpb0N1bSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICB0aGlzLnByZXZpb3VzUmVwb3J0LnJhaW5nc19jdW11bCA9IHZhbHVlICsgKHZhbHVlPjEgPyAnIE9yZSc6J09yYScpO1xuICAgICAgdGhpcy5sb2FkU3RhdGlvbnMoKTtcbiAgfVxuXG4gIGRhdGVVcGRhdGUoKSB7XG4gICAgaWYgKHRoaXMuZGF0ZUZyb20pXG4gICAgICB0aGlzLnByZXZpb3VzUmVwb3J0LmZyb21VVENTZWNvbmQ9IE1hdGgudHJ1bmMobmV3IERhdGUodGhpcy5kYXRlRnJvbSkuZ2V0VGltZSgpLzEwMDApO1xuICAgIGlmICh0aGlzLmRhdGVUbylcbiAgICAgIHRoaXMucHJldmlvdXNSZXBvcnQudG9VVENTZWNvbmQ9IE1hdGgudHJ1bmMobmV3IERhdGUodGhpcy5kYXRlVG8pLmdldFRpbWUoKS8xMDAwKTtcbiAgICB0aGlzLmxvYWRTdGF0aW9ucygpO1xuICB9XG5cblxuXG5cblxuICBwdWJsaWMgbGF5b3V0Q2hhbmdlKGxheW91dDogUHJpbnRMYXlvdXQpIHtcbiAgICBpZiAodGhpcy5wcmV2aW91c1JlcG9ydClcbiAgICAgIHRoaXMucHJldmlvdXNSZXBvcnQubkltZ3MgPSBsYXlvdXQubnVtYmVyT2ZJbWFnZXM7XG4gIH1cblxuICBwdWJsaWMgdG9nZ2xlU3RhdGlvbkFsbChzdGF0aW9ubGlzdDogU3RhdGlvbltdLCBsaXN0aXRlbTogYW55W10sIGV2ZW50OiBhbnkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd0b2dnbGVhbGwnKTtcbiAgICAgIGNvbnNvbGUubG9nKHN0YXRpb25saXN0KTtcbiAgICAgIGNvbnNvbGUubG9nKGxpc3RpdGVtKTtcbiAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmNoZWNrZWQpO1xuICAgICAgc3RhdGlvbmxpc3Quc3BsaWNlKDAsc3RhdGlvbmxpc3QubGVuZ3RoKTtcbiAgICAgIGxpc3RpdGVtLmZvckVhY2goaXRtID0+IHtcbiAgICAgICAgaXRtLnNlbGVjdGVkID0gZXZlbnQuY2hlY2tlZDtcbiAgICAgIH0pO1xuICAgICAgc3RhdGlvbmxpc3QucHVzaCguLi5saXN0aXRlbS5maWx0ZXIoaXRtID0+IGl0bS5zZWxlY3RlZCkpO1xuICB9XG5cbiAgcHVibGljIHRvZ2dsZVN0YXRpb24oc3RhdGlvbmxpc3Q6IFN0YXRpb25bXSwgbGlzdGl0ZW06IGFueVtdLCBpdGVtOiBhbnksIGV2ZW50OiBhbnkpIHtcbiAgICAgIGl0ZW0uc2VsZWN0ZWQ9ZXZlbnQuY2hlY2tlZDtcbiAgICAgIHN0YXRpb25saXN0LnNwbGljZSgwLHN0YXRpb25saXN0Lmxlbmd0aCk7XG4gICAgICBzdGF0aW9ubGlzdC5wdXNoKC4uLmxpc3RpdGVtLmZpbHRlciggaXRtID0+IGl0bS5zZWxlY3RlZCkpXG4gIH1cblxuICBwcml2YXRlIGxvYWRTdGF0aW9ucygpIHtcbiAgICB0aGlzLnBsdXZpb1N0YXRpb25zPVtdO1xuICAgIHRoaXMuaHlkcm9TdGF0aW9ucz1bXTtcbiAgICBpZiAodGhpcy5zZWxlY3RlZEZlYXR1cmVzLmxlbmd0aD4wIHx8ICh0aGlzLnZpZXcgJiYgdGhpcy52aWV3LmJib3gpKXtcbiAgICAgICAgdGhpcy5yZXBvcnRlclNlcnZpY2UuZ2V0UGx1dmlvKHRoaXMuc2VsZWN0ZWRGZWF0dXJlcyx0aGlzLnByZXZpb3VzUmVwb3J0LnRvVVRDU2Vjb25kLHRoaXMucGx1dmlvQ3VtLHRoaXMudmlldy5iYm94KS5zdWJzY3JpYmUoXG4gICAgICAgICAgZGF0YSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhdGlvbnMnLGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5wbHV2aW9TdGF0aW9ucz1kYXRhO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLnNuYWNrQmFyLmVycm9yKCdFcnJvcmUgZHVyYW50ZSBsYSBsZXR0dXJhIGRlaSBwbHV2aW9tZXRyaScsICcnLCB7ZHVyYXRpb246MjAwMH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnJlcG9ydGVyU2VydmljZS5nZXRIeWRybyh0aGlzLnNlbGVjdGVkRmVhdHVyZXMsdGhpcy5wcmV2aW91c1JlcG9ydC50b1VUQ1NlY29uZCx0aGlzLnZpZXcuYmJveCkuc3Vic2NyaWJlKFxuICAgICAgICAgIGRhdGEgPT4ge1xuICAgICAgICAgICAgdGhpcy5oeWRyb1N0YXRpb25zPWRhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhdGlvbnMgaHlkcm8gJyxkYXRhKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5zbmFja0Jhci5lcnJvcignRXJyb3JlIGR1cmFudGUgbGEgbGV0dHVyYSBkZWdsaSBpZHJvbWV0cmknLCAnJywge2R1cmF0aW9uOjIwMDB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9XG4gIH1cbiAgcHVibGljIGVuYWJsZVJlcG9ydCgpe1xuICAgIGlmICh0aGlzLnNlY3Rpb25FbmFibGVkKXtcbiAgICAgIHRoaXMucHJldmlvdXNSZXBvcnQgPSB7XG4gICAgICAgIGZyb21VVENTZWNvbmQ6IDAsXG4gICAgICAgIHRvVVRDU2Vjb25kOiAwLFxuICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICBuSW1nczogMSxcbiAgICAgICAgcmFpbmdzX3RpdGxlOiAnUGx1dmlvbWV0cmknLFxuICAgICAgICBoeWRyb3NfdGl0bGU6ICdJZHJvbWV0cmknLFxuICAgICAgICBsYXllcnM6IFtdLFxuICAgICAgICByYWluZ3M6IFtdLFxuICAgICAgICBoeWRyb3M6IFtdLFxuICAgICAgICByYWluZ3NfY3VtdWw6ICcxIE9yYSdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVMYXllcnMoKTtcbiAgICAgICAgdGhpcy5kYXRlVXBkYXRlKCk7XG5cbiAgICAgICAgdGhpcy5mZWF0dXJlU3Vic2NyaXB0aW9uPXRoaXMuZ2VvU2VydmljZS5vbkZlYXR1cmVzQ2hhbmdlKCkuc3Vic2NyaWJlKFxuICAgICAgICAgIGRhdGEgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZlYXR1cmVzPWRhdGEuam9pbignLCcpO1xuICAgICAgICAgICAgdGhpcy5sb2FkU3RhdGlvbnMoKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy52aWV3U3Vic2NyaXB0aW9uPXRoaXMuZ2VvU2VydmljZS5vblZpZXdDYW5nZSgpLnN1YnNjcmliZShcbiAgICAgICAgICBkYXRhID0+IHtcbiAgICAgICAgICAgIHRoaXMudmlldz1kYXRhO1xuICAgICAgICAgICAgdGhpcy5yZXNldFJhaW5NYXBzKCk7XG4gICAgICAgICAgICB0aGlzLm1hcERpc2FibGVkLm5leHQodGhpcy52aWV3PT09dW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRoaXMubG9hZFN0YXRpb25zKCk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgfSBlbHNle1xuICAgICAgaWYgKHRoaXMudmlld1N1YnNjcmlwdGlvbikgdGhpcy52aWV3U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICBpZiAodGhpcy5mZWF0dXJlU3Vic2NyaXB0aW9uKSB0aGlzLmZlYXR1cmVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMucHJldmlvdXNSZXBvcnQ9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB0aGlzLnByZXZpb3VzUmVwb3J0Q2hhbmdlLmVtaXQodGhpcy5wcmV2aW91c1JlcG9ydCk7XG5cbiAgfVxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmVuYWJsZVJlcG9ydCgpO1xuXG4gICAgdGhpcy5yZXBvcnRlclNlcnZpY2UuZ2V0QXZhaWxhYmxlQ3VtdWwoKS5zdWJzY3JpYmUoXG4gICAgICBkYXRhID0+IHtcbiAgICAgICAgdGhpcy5jdW11bHM9ZGF0YTtcbiAgICAgIH1cbiAgICApXG5cblxuICAgIHRoaXMubG9hZFN0YXRpb25zKCk7XG4gIH1cblxufVxuIiwiPCEtLWFiaWxpdGF6aW9uZS0tPlxuPG1hdC1zbGlkZS10b2dnbGVcbiAgY2xhc3M9XCJcIlxuICBjb2xvcj1wcmltYXJ5IFsobmdNb2RlbCldPVwic2VjdGlvbkVuYWJsZWRcIiAgKGNoYW5nZSk9XCJlbmFibGVSZXBvcnQoKVwiPlxuICBJbmNsdWRpIFNpdHVhemlvbmUgUHJlZ3Jlc3NhXG48L21hdC1zbGlkZS10b2dnbGU+XG5cblxuPGRpdiBjbGFzcz1cInNlY3Rpb24td3JhcHBlclwiIFtuZ0NsYXNzXT1cIiFzZWN0aW9uRW5hYmxlZD8nc2VjdGlvbi1kaXNhYmxlZCc6JydcIj5cbiAgPCEtLW1hcHBhLS0+XG4gIDxkaXYgY2xhc3M9XCJjb2wtMTIgbXktMlwiID5cbiAgICA8IS0tcGVyaW9kbyBkaSBhbmFsaXNpLS0+XG4gICAgPGgyIGNsYXNzPVwiYm9yZGVyLWJvdHRvbSBtYi0zIG10LTNcIj5QZXJpb2RvIGRpIEFuYWxpc2k8L2gyPlxuXG4gICAgPG1hdC1mb3JtLWZpZWxkIGFwcGVhcmFuY2U9XCJmaWxsXCIgY2xhc3M9XCJtZS0yXCI+XG4gICAgICA8bWF0LWxhYmVsPmRhPC9tYXQtbGFiZWw+XG4gICAgICAgIDxpbnB1dCBtYXRJbnB1dCB0eXBlPVwiZGF0ZXRpbWUtbG9jYWxcIiBwbGFjZWhvbGRlcj1cImRhdGEgZGFcIiBbKG5nTW9kZWwpXT0gXCJkYXRlRnJvbVwiIChjaGFuZ2UpPVwiZGF0ZVVwZGF0ZSgpXCI+XG4gICAgPC9tYXQtZm9ybS1maWVsZD5cblxuICAgIDxtYXQtZm9ybS1maWVsZCBhcHBlYXJhbmNlPVwiZmlsbFwiIGNsYXNzPVwibWUtMlwiPlxuICAgICAgPG1hdC1sYWJlbD5hPC9tYXQtbGFiZWw+XG4gICAgICA8aW5wdXQgbWF0SW5wdXQgdHlwZT1cImRhdGV0aW1lLWxvY2FsXCIgcGxhY2Vob2xkZXI9XCJkYXRhIGFcIiBbKG5nTW9kZWwpXT0gXCJkYXRlVG9cIiAoY2hhbmdlKT1cImRhdGVVcGRhdGUoKVwiPlxuICAgIDwvbWF0LWZvcm0tZmllbGQ+XG5cbiAgICA8IS0tIDxidXR0b24gbWF0LWZsYXQtYnV0dG9uIGNvbG9yPVwicHJpbWFyeVwiPjxzcGFuIGNsYXNzPVwiZmFzIGZhLWNsb2NrIG1lLTFcIj48L3NwYW4+Tm93PC9idXR0b24+IC0tPlxuXG4gIDwvZGl2PlxuXG4gIDwhLS10ZXN0byBzaXR1YXppb25lIHByZWdyZXNzYS0tPlxuICA8ZGl2IGNsYXNzPVwiY29sLTEyIG15LTJcIiAqbmdJZj1cInNlY3Rpb25FbmFibGVkXCI+XG4gICAgPGNpbWEtdGV4dC1lZGl0b3IgWyh0ZXh0KV09XCJwcmV2aW91c1JlcG9ydC50ZXh0XCIgW2NvbmZpZ109XCJjb25maWdcIj48L2NpbWEtdGV4dC1lZGl0b3I+XG4gIDwvZGl2PlxuXG4gIDwhLS1sYXlvdXQgc3RhbXBhLS0+XG4gIDxkaXYgY2xhc3M9XCJjb2wtMTIgbXktMlwiPlxuICAgIDxyZXBvcnRlci1wcmludC1sYXlvdXQgKHNlbGVjdGVkKT1cImxheW91dENoYW5nZSgkZXZlbnQpXCI+PC9yZXBvcnRlci1wcmludC1sYXlvdXQ+XG4gXG4gIDwvZGl2PlxuXG4gIDwhLS1sYXllci0tPlxuICA8ZGl2IGNsYXNzPVwiY29sLTEyIG15LTJcIj5cbiAgICA8aDIgY2xhc3M9XCJib3JkZXItYm90dG9tIG1iLTMgbXQtM1wiPkxheWVyczwvaDI+XG4gICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyIGNvbC1sZy02IGNvbC14bC0zIG1iLTJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC13cmFwcGVyIHAtM1wiPlxuICAgICAgICAgIDxoMz5NYXBwZSBkaSBQaW9nZ2lhPC9oMz5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyYWluTWFwXCIgKm5nRm9yPVwibGV0IG1hcCBvZiByYWluTWFwcywgbGV0IGkgPSBpbmRleFwiPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbS1saXN0LWJpZy1idWxsXCI+XG4gICAgICAgICAgICAgIDxzcGFuPnt7aSsxfX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPG1hdC1mb3JtLWZpZWxkIGFwcGVhcmFuY2U9XCJmaWxsXCIgY2xhc3M9XCJ3LTEwMFwiPlxuICAgICAgICAgICAgICA8bWF0LWxhYmVsPkN1bXVsYXRhPC9tYXQtbGFiZWw+XG4gICAgICAgICAgICAgIDxtYXQtc2VsZWN0IFsodmFsdWUpXT1cIm1hcC5zZWxlY3Rpb25cIiAodmFsdWVDaGFuZ2UpPVwic2VsZWN0TWFwKCRldmVudCwgbWFwKVwiIFtkaXNhYmxlZF09XCJtYXBEaXNhYmxlZCB8IGFzeW5jXCI+XG4gICAgICAgICAgICAgICAgPG1hdC1vcHRpb24gKm5nRm9yPVwibGV0IGN1bXVsYXRhIG9mIGN1bXVsc1wiIFt2YWx1ZV09XCJjdW11bGF0YS52YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAge3tjdW11bGF0YS5kZXNjcn19XG4gICAgICAgICAgICAgICAgPC9tYXQtb3B0aW9uPlxuICAgICAgICAgICAgICA8L21hdC1zZWxlY3Q+XG4gICAgICAgICAgICA8L21hdC1mb3JtLWZpZWxkPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVsLWJ0bi13cmFwcGVyIG1zLTJcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZWwtYnRuIGZhcyBmYS10cmFzaC1hbHRcIiAqbmdJZj1cImk+MFwiIChjbGljayk9XCJkZWxSYWluTWFwcyhtYXApXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxidXR0b24gbWF0LWZsYXQtYnV0dG9uIGNvbG9yPVwicHJpbWFyeVwiIGNsYXNzPVwiYmctc3VjY2Vzc1wiIChjbGljayk9XCJhZGRSYWluTWFwcygpXCI+PHNwYW4gY2xhc3M9XCJmYXMgZmEtcGx1cyBtZS0xXCI+PC9zcGFuPkFnZ2l1bmdpIE1hcHBhPC9idXR0b24+XG5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiBjb2wtbGctNiBjb2wteGwtMyBtYi0yXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtd3JhcHBlciBwLTNcIj5cbiAgICAgICAgICA8cmVwb3J0ZXItd2FybmluZy1wbHV2aW8gIFtkaXNhYmxlZF09XCIhc2VjdGlvbkVuYWJsZWRcIiBbcmVwb3J0XT1cInByZXZpb3VzUmVwb3J0XCIgKHdhcm5pbmdDaGFuZ2UpPVwid2FyblBsdXZpb0NoYW5nZSgkZXZlbnQpXCIgPjwvcmVwb3J0ZXItd2FybmluZy1wbHV2aW8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgY29sLWxnLTYgY29sLXhsLTMgbWItMlwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXdyYXBwZXIgcC0zXCI+XG4gICAgICAgICAgPHJlcG9ydGVyLXdhcm5pbmctaWRybyAgIFtkaXNhYmxlZF09XCIhc2VjdGlvbkVuYWJsZWRcIiBbcmVwb3J0XT1cInByZXZpb3VzUmVwb3J0XCIgKHdhcm5pbmdDaGFuZ2UpPVwid2Fybklkcm9DaGFuZ2UoJGV2ZW50KVwiPjwvcmVwb3J0ZXItd2FybmluZy1pZHJvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyIGNvbC1sZy02IGNvbC14bC0zIG1iLTJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC13cmFwcGVyIHAtM1wiPlxuICAgICAgICAgIDxyZXBvcnRlci1pbWctdXBsb2FkZXIgKHVwbG9hZGVkQ2hhbmdlKT1cInVwbG9hZGVkSW1hZ2VDaGFuZ2UoJGV2ZW50KVwiPjwvcmVwb3J0ZXItaW1nLXVwbG9hZGVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG4gIDwhLS10YWJlbGxhIHBsdXZpbyAtLT5cbiAgPGRpdiBjbGFzcz1cImNvbC0xMiBteS0yXCI+XG5cbiAgICA8IS0tcGx1dmlvbWV0cmktLT5cbiAgICA8aDIgY2xhc3M9XCJib3JkZXItYm90dG9tIG1iLTMgbXQtM1wiPlBsdXZpb21ldHJpPC9oMj5cblxuICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cblxuICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyXCI+XG4gICAgICAgIDwhLS1hYmlsaXRhemlvbmUtLT5cbiAgICAgICAgPG1hdC1zbGlkZS10b2dnbGVcbiAgICAgICAgICBjbGFzcz1cIm1lLTJcIlxuICAgICAgICAgIGNvbG9yPXByaW1hcnkgWyhuZ01vZGVsKV09XCJwbHV2aW9tZXRyaVRhYmxlRW5hYmxlZFwiPlxuICAgICAgICAgIEluY2x1ZGkgUGx1dmlvbWV0cmlcbiAgICAgICAgPC9tYXQtc2xpZGUtdG9nZ2xlPlxuXG4gICAgICAgIDxtYXQtZm9ybS1maWVsZCBhcHBlYXJhbmNlPVwiZmlsbFwiIGNsYXNzPVwiXCI+XG4gICAgICAgICAgPG1hdC1sYWJlbD5DdW11bGF0YTwvbWF0LWxhYmVsPlxuICAgICAgICAgIDxtYXQtc2VsZWN0IFsodmFsdWUpXT1cInBsdXZpb0N1bVwiICh2YWx1ZUNoYW5nZSk9XCJzZWxlY3RQbHV2aW9DdW0oJGV2ZW50KVwiPlxuICAgICAgICAgICAgPG1hdC1vcHRpb24gKm5nRm9yPVwibGV0IGN1bXVsYXRhIG9mIGN1bXVsc1wiIFt2YWx1ZV09XCJjdW11bGF0YS52YWx1ZVwiPlxuICAgICAgICAgICAgICB7e2N1bXVsYXRhLmRlc2NyfX1cbiAgICAgICAgICAgIDwvbWF0LW9wdGlvbj5cbiAgICAgICAgICA8L21hdC1zZWxlY3Q+XG4gICAgICAgIDwvbWF0LWZvcm0tZmllbGQ+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPCEtLXRhYmVsbGEgcGx1dmlvbWV0cmktLT5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgcGx1dmlvbWV0cmktdGFibGVcIiBbbmdDbGFzc109XCIhcGx1dmlvbWV0cmlUYWJsZUVuYWJsZWQ/J3NlY3Rpb24tZGlzYWJsZWQnOicnXCI+XG5cbiAgICAgICAgPHRhYmxlIGNsYXNzPVwidGFibGUgdGFibGUtc3RyaXBlZFwiPlxuICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICA8dHI+XG4gICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj5cbiAgICAgICAgICAgICAgPG1hdC1jaGVja2JveCBjbGFzcz1cImV4YW1wbGUtbWFyZ2luXCIgKGNoYW5nZSk9XCJ0b2dnbGVTdGF0aW9uQWxsKHByZXZpb3VzUmVwb3J0LnJhaW5ncyxwbHV2aW9TdGF0aW9ucywgJGV2ZW50KVwiPjwvbWF0LWNoZWNrYm94PlxuICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lLTFcIj5TdGF6aW9uZTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0YWJsZS1pbnB1dC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidGFibGUtZmlsdGVyXCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIkNlcmNhIHN0YXppb25lXCI+XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZS0xXCI+Q29tdW5lPC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRhYmxlLWlucHV0LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJ0YWJsZS1maWx0ZXJcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiQ2VyY2EgY29tdW5lXCI+XG4gICAgICAgICAgICAgIDwvc3Bhbj48L3RoPlxuICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWUtMVwiPlByb3ZpbmNpYTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0YWJsZS1pbnB1dC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidGFibGUtZmlsdGVyXCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIkNlcmNhIHByb3ZpbmNpYVwiPlxuICAgICAgICAgICAgICA8L3NwYW4+PC90aD5cbiAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lLTFcIj5SZWdpb25lPC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRhYmxlLWlucHV0LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJ0YWJsZS1maWx0ZXJcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiQ2VyY2EgcmVnaW9uZVwiPlxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWUtMVwiPlZhbG9yZTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0YWJsZS1pbnB1dC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwidGFibGUtZmlsdGVyXCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIkNlcmNhIHZhbG9yZVwiPlxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICA8dHIgKm5nRm9yPVwibGV0IHBsdXZpbyBvZiBwbHV2aW9TdGF0aW9uc1wiPlxuICAgICAgICAgICAgICA8dGQgc2NvcGU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICA8bWF0LWNoZWNrYm94IGNsYXNzPVwiZXhhbXBsZS1tYXJnaW5cIiAgW2NoZWNrZWRdPVwicGx1dmlvLnNlbGVjdGVkXCIgKGNoYW5nZSk9XCJ0b2dnbGVTdGF0aW9uKHByZXZpb3VzUmVwb3J0LnJhaW5ncyxwbHV2aW9TdGF0aW9ucyxwbHV2aW8sJGV2ZW50KVwiPjwvbWF0LWNoZWNrYm94PlxuICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICA8dGQ+e3twbHV2aW8uc3RhdGlvbm5hbWV9fTwvdGQ+XG4gICAgICAgICAgICAgIDx0ZD57e3BsdXZpby5tdW5pY319PC90ZD5cbiAgICAgICAgICAgICAgPHRkPnt7cGx1dmlvLmRpc3RyaWN0fX08L3RkPlxuICAgICAgICAgICAgICA8dGQ+e3twbHV2aW8ucmVnaW9ufX08L3RkPlxuICAgICAgICAgICAgICA8dGQ+e3twbHV2aW8udmFsdWV9fSB7e3BsdXZpby5tdX19PC90ZD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgPC90YWJsZT5cbiAgICAgIDwvZGl2PlxuXG5cblxuICAgIDwvZGl2PlxuXG4gIDwvZGl2PlxuXG4gIDwhLS10YWJlbGxhIGlkcm8gLS0+XG4gIDxkaXYgY2xhc3M9XCJjb2wtMTIgbXktMlwiPlxuXG4gICAgPCEtLXBsdXZpb21ldHJpLS0+XG4gICAgPGgyIGNsYXNzPVwiYm9yZGVyLWJvdHRvbSBtYi0zIG10LTNcIj5JZHJvbWV0cmk8L2gyPlxuXG4gICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgPCEtLWFiaWxpdGF6aW9uZS0tPlxuICAgICAgICA8bWF0LXNsaWRlLXRvZ2dsZVxuICAgICAgICAgIGNsYXNzPVwibWUtMlwiXG4gICAgICAgICAgY29sb3I9cHJpbWFyeSBbKG5nTW9kZWwpXT1cImlkcm9tZXRyaVRhYmxlRW5hYmxlZFwiPlxuICAgICAgICAgIEluY2x1ZGkgSWRyb21ldHJpIFxuICAgICAgICA8L21hdC1zbGlkZS10b2dnbGU+XG5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8IS0tdGFiZWxsYSBpZHJvbWV0cmktLT5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgcGx1dmlvbWV0cmktdGFibGVcIiBbbmdDbGFzc109XCIhaWRyb21ldHJpVGFibGVFbmFibGVkPydzZWN0aW9uLWRpc2FibGVkJzonJ1wiPlxuXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLXN0cmlwZWRcIj5cbiAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgPHRyPlxuICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+XG4gICAgICAgICAgICAgIDxtYXQtY2hlY2tib3ggY2xhc3M9XCJleGFtcGxlLW1hcmdpblwiIChjaGFuZ2UpPVwidG9nZ2xlU3RhdGlvbkFsbChwcmV2aW91c1JlcG9ydC5oeWRyb3MsaHlkcm9TdGF0aW9ucywkZXZlbnQpXCI+PC9tYXQtY2hlY2tib3g+XG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWUtMVwiPlN0YXppb25lPC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRhYmxlLWlucHV0LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJ0YWJsZS1maWx0ZXJcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiQ2VyY2Egc3RhemlvbmVcIj5cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgIDx0aCBzY29wZT1cImNvbFwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1lLTFcIj5Db211bmU8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGFibGUtaW5wdXQtd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInRhYmxlLWZpbHRlclwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJDZXJjYSBjb211bmVcIj5cbiAgICAgICAgICAgICAgPC9zcGFuPjwvdGg+XG4gICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZS0xXCI+UHJvdmluY2lhPC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRhYmxlLWlucHV0LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJ0YWJsZS1maWx0ZXJcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiQ2VyY2EgcHJvdmluY2lhXCI+XG4gICAgICAgICAgICAgIDwvc3Bhbj48L3RoPlxuICAgICAgICAgICAgPHRoIHNjb3BlPVwiY29sXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWUtMVwiPlJlZ2lvbmU8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGFibGUtaW5wdXQtd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInRhYmxlLWZpbHRlclwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJDZXJjYSByZWdpb25lXCI+XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZS0xXCI+VmFsb3JlPC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRhYmxlLWlucHV0LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJ0YWJsZS1maWx0ZXJcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiQ2VyY2EgdmFsb3JlXCI+XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGggc2NvcGU9XCJjb2xcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZS0xXCI+U3VwZXJhbWVudG8gU29nbGlhPC9zcGFuPlxuICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVwidGFibGUtZmlsdGVyXCIgdHlwZT1cInRleHRcIj5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMVwiPk51c3N1bmEgc2VsZXppb25lPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjFcIj5CYXNzYTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+TWVkaWE8L29wdGlvbj5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMVwiPkVsZXZhdGE8L29wdGlvbj5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMVwiPk1vbHRvIEVsZXZhdGE8L29wdGlvbj5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMVwiPk1hc3NpbWE8L29wdGlvbj5cbiAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgPHRyICpuZ0Zvcj1cImxldCBoeWRybyBvZiBoeWRyb1N0YXRpb25zXCI+XG4gICAgICAgICAgICA8dGggc2NvcGU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgPG1hdC1jaGVja2JveCBjbGFzcz1cImV4YW1wbGUtbWFyZ2luXCIgIFtjaGVja2VkXT1cImh5ZHJvLnNlbGVjdGVkXCIgKGNoYW5nZSk9XCJ0b2dnbGVTdGF0aW9uKHByZXZpb3VzUmVwb3J0Lmh5ZHJvcyxoeWRyb1N0YXRpb25zLGh5ZHJvLCRldmVudClcIj48L21hdC1jaGVja2JveD5cbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGQ+e3toeWRyby5zdGF0aW9ubmFtZX19PC90ZD5cbiAgICAgICAgICAgIDx0ZD57e2h5ZHJvLm11bmljfX08L3RkPlxuICAgICAgICAgICAgPHRkPnt7aHlkcm8uZGlzdHJpY3R9fTwvdGQ+XG4gICAgICAgICAgICA8dGQ+e3toeWRyby5yZWdpb259fTwvdGQ+XG4gICAgICAgICAgICA8dGQ+e3toeWRyby52YWx1ZX19IHt7aHlkcm8ubXV9fTwvdGQ+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICA8L3RhYmxlPlxuICAgICAgPC9kaXY+XG5cblxuXG4gICAgPC9kaXY+XG5cbiAgPC9kaXY+XG48L2Rpdj5cblxuXG5cblxuIl19